<!doctype html>
<meta charset="utf-8">
<title>Predict Sentiment</title>
<style>
  body { font: 18px/1.5 system-ui, sans-serif; max-width: 720px; margin: 3rem auto; padding: 0 1rem; }
  textarea { width: 100%; height: 120px; }
  button { padding: .6rem 1rem; margin-top: .5rem; background:#0078d4; color:white; border:none; border-radius:6px; cursor:pointer; }
  button:hover { background:#005fa3; }
  .muted { opacity:.7 }
</style>

<a href="index.html" class="muted">← Back to Home</a>
<h2>Predict Text Sentiment</h2>
<p class="muted">Type your text below and click <strong>Predict</strong>.</p>

<textarea id="t" placeholder="Type something positive or negative...">FastAPI + HF works!</textarea><br/>
<button id="btn">Predict</button>

<h3>Result:</h3>
<pre id="out"></pre>

<script>
  const btn = document.getElementById('btn');
  const out = document.getElementById('out');

  btn.onclick = async () => {
    const text = document.getElementById('t').value.trim();
    out.textContent = "⏳ Predicting...";
    try {
      const r = await fetch('/predict', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({text})
      });
      const data = await r.json();
      if (!r.ok) throw new Error(data.detail || r.statusText);
      out.textContent = `Label: ${data.label}\nConfidence: ${(data.score*100).toFixed(2)}%`;
    } catch (e) {
      out.textContent = "❌ Error: " + e.message;
    }
  };
</script>
